<div class="bg-white rounded-lg shadow-sm border border-slate-200 p-8 max-w-4xl mx-auto">
  <div class="flex justify-between items-center mb-8">
    <h2 class="text-2xl font-bold text-slate-900">Aprovação da Gestão</h2>
    <%= link_to "Voltar", quality_cases_path, 
               class: "inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
  </div>

  <!-- Informações do Caso -->
  <div class="bg-slate-50 border border-slate-200 rounded-md p-6 mb-6">
    <h3 class="text-lg font-medium text-slate-700 mb-4">Informações do Caso</h3>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
      <div>
        <span class="font-medium text-slate-600">Chamado:</span>
        <p class="text-slate-900"><%= @quality_case.numero_chamado %></p>
      </div>
      <div>
        <span class="font-medium text-slate-600">Cliente:</span>
        <p class="text-slate-900"><%= @quality_case.cliente %></p>
      </div>
      <div>
        <span class="font-medium text-slate-600">Técnico:</span>
        <p class="text-slate-900"><%= @quality_case.tecnico %></p>
      </div>
      <div>
        <span class="font-medium text-slate-600">Equipe:</span>
        <p class="text-slate-900"><%= @quality_case.team&.nome %></p>
      </div>
    </div>
  </div>

  <!-- Análise da Qualidade (Readonly) -->
  <div class="bg-blue-50 border border-blue-200 rounded-md p-6 mb-6">
    <h3 class="text-lg font-medium text-blue-800 mb-4">Análise Realizada pela Qualidade</h3>
    
    <div class="space-y-4">
      <% if @quality_case.analise_atendimento.present? %>
        <div>
          <h4 class="font-medium text-blue-700">Análise de Atendimento:</h4>
          <p class="text-blue-900 bg-white p-3 rounded border"><%= @quality_case.analise_atendimento %></p>
        </div>
      <% end %>
      
      <% if @quality_case.analise_conhecimento.present? %>
        <div>
          <h4 class="font-medium text-blue-700">Análise de Conhecimento:</h4>
          <p class="text-blue-900 bg-white p-3 rounded border"><%= @quality_case.analise_conhecimento %></p>
        </div>
      <% end %>
      
      <% if @quality_case.analise_procedimental.present? %>
        <div>
          <h4 class="font-medium text-blue-700">Análise Procedimental:</h4>
          <p class="text-blue-900 bg-white p-3 rounded border"><%= @quality_case.analise_procedimental %></p>
        </div>
      <% end %>
      
      <% if @quality_case.acoes_corretivas_propostas.present? %>
        <div>
          <h4 class="font-medium text-blue-700">Ações Corretivas Propostas:</h4>
          <p class="text-blue-900 bg-white p-3 rounded border"><%= @quality_case.acoes_corretivas_propostas %></p>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Formulários de Aprovação/Recusa -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Aprovar -->
    <div class="bg-green-50 border border-green-200 rounded-md p-6">
      <h3 class="text-lg font-medium text-green-800 mb-4">Aprovar Avaliação</h3>
      
      <%= form_with model: @quality_case, local: true, url: aprovar_quality_case_path(@quality_case) do |form| %>
        <div class="mb-4">
          <%= form.label :acoes_adotadas, "Ações Adotadas (Obrigatório)", class: "block text-sm font-medium text-green-700" %>
          <%= form.text_area :acoes_adotadas, rows: 4, required: true,
                            placeholder: "Descreva as ações que serão/foram adotadas pela gestão...",
                            class: "mt-1 w-full border border-green-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm" %>
        </div>
        
        <%= form.submit "Aprovar e Concluir", 
                       class: "w-full px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700" %>
      <% end %>
    </div>

    <!-- Recusar -->
    <div class="bg-red-50 border border-red-200 rounded-md p-6">
      <h3 class="text-lg font-medium text-red-800 mb-4">Recusar Avaliação</h3>
      
      <%= form_with model: @quality_case, local: true, url: recusar_quality_case_path(@quality_case) do |form| %>
        <div class="mb-4">
          <%= form.label :motivo_recusa, "Motivo da Recusa (Obrigatório)", class: "block text-sm font-medium text-red-700" %>
          <%= form.text_area :motivo_recusa, rows: 4, required: true,
                            placeholder: "Descreva o motivo da recusa da avaliação...",
                            class: "mt-1 w-full border border-red-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-red-500 focus:border-red-500 sm:text-sm" %>
        </div>
        
        <%= form.submit "Recusar e Retornar", 
                       class: "w-full px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700" %>
      <% end %>
    </div>
  </div>
</div>